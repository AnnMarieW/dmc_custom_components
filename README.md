## Custom Components for Dash Mantine Components

### Introduction

This repository shows how to build custom Dash components using Mantine components and hooks. It includes examples of
custom inputs, such as `Select`.

The components are based on examples in Mantine’s [Combobox documentation](https://mantine.dev/combobox/?e=BasicSelect). 

Requires `dash-mantine-components>=2.5.0`

### Project Setup

To create your own custom component project, start by following the instructions in Plotly’s [Dash TypeScript Component Template](https://github.com/plotly/dash-typescript-component-template). 
This template sets up everything you need to build Dash components with React and TypeScript.

The template will generate:

* A standard project structure for Dash components
* A React + TypeScript development environment
* A build pipeline that produces the JavaScript bundles and Python package
* A generated Python API for your custom components

This repository was created from that template and then extended to support Mantine-based components.

### Using the Mantine wrapper

Dash Mantine Components (≥ 2.5.0) exposes `MantineCore`, `MantineHooks`, and `MantineDates` on the global `window`
object. To safely use these APIs in custom components, this project includes a small wrapper that:

* Waits until the Mantine APIs are available
* Ensures your component uses the same Mantine context and theme as the Dash app
* Avoids the need to add a separate `MantineProvider` inside your component

You can copy [this wrapper](https://github.com/AnnMarieW/dmc_custom_components/blob/main/src/ts/utils/withMantine.tsx) directly into your own project.

Once copied, wrap your custom React components with it before exporting them. This allows your components to access 
Mantine hooks and utilities in a safe and consistent way.

See [usage.py](https://github.com/AnnMarieW/dmc_custom_components/blob/main/usage.py) for an example of how these wrapped components are used in a Dash app.

### Version Requirements

This project depends on Mantine being supplied by Dash Mantine Components. Your Dash app must use `dash-mantine-components` ≥ 2.5.0, and your custom component’s Mantine dependencies must match that version.

Set the Mantine versions in your project’s `package.json` accordingly. This project uses `dash-mantine-components==2.5.0` with Mantine `8.3.13`.  Refer to the [DMC Migration Guide](https://www.dash-mantine-components.com/migration) for version mappings.

Mismatched Mantine versions may cause runtime errors.

### Updating Webpack

To use Mantine in custom components, add these `externals` in your `webpack.config.js`:

```javascript
'@mantine/core': {
    commonjs: '@mantine/core',
    commonjs2: '@mantine/core',
    amd: '@mantine/core',
    root: 'MantineCore',
},
'@mantine/hooks': {
    commonjs: '@mantine/hooks',
    commonjs2: '@mantine/hooks',
    amd: '@mantine/hooks',
    root: 'MantineHooks',
},
'@mantine/dates': {
    commonjs: '@mantine/dates',
    commonjs2: '@mantine/dates',
    amd: '@mantine/dates',
    root: 'MantineDates',
},
```
### Getting Help

If you need help while building custom components, here are some options:

* Use [GitHub issues](https://github.com/AnnMarieW/dmc_custom_components/issues) to report bugs or ask questions about these examples.

* Ask questions or discuss custom components with the [DMC Discord community](https://discord.gg/KuHmfQ9rXq)

* For broader Dash questions or to share examples use the [Dash Community Forum](https://community.plotly.com/)

When asking for help, please include your `dash-mantine-components` version, the Mantine version from your `package.json`, and a minimal example if possible.


--------------------

### Everything below is automatically generated by the Dash Typescript Component Template:

-------------


## Install

```shell
pip install dmc_custom_components
```

## Development
### Getting Started

1. Create a new python environment:
   ```shell
   python -m venv venv
   . venv/bin/activate
   ```
   _Note: venv\Scripts\activate for windows_

2. Install python dependencies:
   ```shell
   pip install -r requirements.txt
   ```
3. Install npm packages:
   1. Optional: use [nvm](https://github.com/nvm-sh/nvm) to manage node version:
      ```shell
      nvm install
      nvm use
      ```
   2. Install:
      ```shell
      npm install
      ```
4. Build:
   ```shell
   npm run build
   ```


### Create a production build and publish:

1. Clean up build and  dist - removes old and temp tarballs:
```
rm -rf dist build
```


2. Run a new build
```
npm install
npm run build
```

3. Build source distribution.  
```
npm run dist
```

4. Test your tarball by copying it into a new environment and installing it locally, for example:
```
pip install <your-project-name-version>.tar.gz
```

Note:  For local install, use:

```
pip install -e ./path-to-project
```


5. Publish on PyPI

Prepare release on the GitHub UI - For more information see [Managing Releases](https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository)
When in doubt, do an alpha release first
```
$ twine upload dist/*
```
6. If publish on npm:

Note: Publishing your component to NPM will make the JavaScript bundles available on the unpkg CDN. By default, Dash serves the component library's CSS and JS locally, but if you choose to publish the package to NPM you can set `serve_locally` to `False` and you may see faster load times.
```
npm publish
``` 


### Justfile

Alternatively, use the provided [just](https://github.com/casey/just) commands:

1. Create a Python environment from previous step 1 and install:
   ```shell
   just install
   ```
2. Build
   ```shell
   just build
   ```
3. Publish
   ```shell
   just publish
   ```
4. See all commands with `just -l`
